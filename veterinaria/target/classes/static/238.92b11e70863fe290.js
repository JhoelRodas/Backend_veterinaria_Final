"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[238],{13238:(nt,b,i)=>{i.r(b),i.d(b,{RolModule:()=>ot});var u=i(60177),g=i(18498),a=i(9159),s=i(89417),c=i(34006),t=i(17705),f=i(52920),p=i(88834),h=i(86467),y=i(99631);function j(o,l){if(1&o&&(t.j41(0,"button",8),t.EFF(1,"Crear Rol "),t.k0s()),2&o){const e=t.XpG();t.Y8G("disabled",!e.form.valid)}}function F(o,l){if(1&o&&(t.j41(0,"button",8),t.EFF(1,"Actualizar Rol "),t.k0s()),2&o){const e=t.XpG();t.Y8G("disabled",!e.form.valid)}}let v=(()=>{class o{constructor(e,n){this.defaults=e,this.dialogRef=n,this.mode="create"}ngOnInit(){this.defaults?this.mode="update":this.defaults={},this.form=new s.J3({name:new s.hs(this.defaults.name),description:new s.hs(this.defaults.description)})}save(){console.log(this.form.value),"create"===this.mode?this.createCustomer():"update"===this.mode&&this.updateCustomer()}createCustomer(){this.dialogRef.close(this.form.value)}updateCustomer(){const e=this.form.value;e.id=this.defaults.id,this.dialogRef.close(e)}isCreateMode(){return"create"===this.mode}isUpdateMode(){return"update"===this.mode}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(c.Vh),t.rXU(c.CP))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["fury-crear-actualizar-rol"]],decls:16,vars:4,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["fxLayout","column wrap"],["fxFlex",""],["type","text","formControlName","name","matInput",""],["type","text","formControlName","description","matInput",""],["fxLayout","row","fxLayoutAlign","end center"],["mat-flat-button","","color","primary",3,"disabled",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(n,r){1&n&&(t.j41(0,"div",0),t.EFF(1),t.k0s(),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return r.save()}),t.j41(3,"mat-dialog-content")(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Nombre"),t.k0s(),t.nrm(8,"input",4),t.k0s(),t.j41(9,"mat-form-field",3)(10,"mat-label"),t.EFF(11,"Descripcion"),t.k0s(),t.nrm(12,"input",5),t.k0s()()(),t.j41(13,"mat-dialog-actions",6),t.DNE(14,j,2,1,"button",7),t.DNE(15,F,2,1,"button",7),t.k0s()()),2&n&&(t.R7$(1),t.SpI("",r.isCreateMode()?"Crear":"Actualizar"," Producto"),t.R7$(1),t.Y8G("formGroup",r.form),t.R7$(12),t.Y8G("ngIf",r.isCreateMode()),t.R7$(1),t.Y8G("ngIf",r.isUpdateMode()))},dependencies:[u.bT,f.DJ,f.sA,f.UI,s.qT,s.me,s.BC,s.cb,p.$z,c.BI,c.Yi,c.E7,h.rl,h.nJ,y.fg,s.j4,s.JD]})}}return o})();var G=i(97405),$=i(74061),I=i(75063),_=i(82765),x=i(99213),d=i(59115),D=i(96695),C=i(2042),T=i(43655),E=i(53007),k=i(15551);function M(o,l){if(1&o){const e=t.RV6();t.j41(0,"div",14)(1,"button",15),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.createRol())}),t.j41(2,"mat-icon"),t.EFF(3,"add"),t.k0s()()()}}function N(o,l){1&o&&(t.j41(0,"th",16)(1,"mat-checkbox",17),t.bIt("click",function(n){return n.stopPropagation()}),t.k0s()())}function S(o,l){1&o&&(t.j41(0,"td",18)(1,"mat-checkbox",17),t.bIt("click",function(n){return n.stopPropagation()}),t.k0s()())}function A(o,l){if(1&o&&(t.j41(0,"th",23),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",e.name,"")}}function Y(o,l){if(1&o&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&o){const e=l.$implicit,n=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",e[n.property]," ")}}function V(o,l){if(1&o&&(t.qex(0,20),t.DNE(1,A,2,1,"th",21),t.DNE(2,Y,2,1,"td",22),t.bVm()),2&o){const e=t.XpG().$implicit;t.Y8G("matColumnDef",e.property)}}function X(o,l){if(1&o&&(t.qex(0),t.DNE(1,V,3,1,"ng-container",19),t.bVm()),2&o){const e=l.$implicit;t.R7$(1),t.Y8G("ngIf",e.isModelProperty)}}function z(o,l){1&o&&t.nrm(0,"th",25)}function P(o,l){if(1&o){const e=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,m=t.XpG();return t.Njj(m.updateRol(r))}),t.j41(1,"span"),t.EFF(2,"Modify"),t.k0s()()}}function B(o,l){if(1&o){const e=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,m=t.XpG();return t.Njj(m.deleteRol(r))}),t.j41(1,"span"),t.EFF(2,"Delete"),t.k0s()()}}function L(o,l){if(1&o&&(t.j41(0,"td",18)(1,"button",26),t.bIt("click",function(n){return n.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_horiz"),t.k0s()(),t.j41(4,"mat-menu",27,28),t.DNE(6,P,3,0,"button",29),t.DNE(7,B,3,0,"button",29),t.k0s()()),2&o){const e=t.sdS(5),n=t.XpG();t.R7$(1),t.Y8G("matMenuTriggerFor",e),t.R7$(5),t.Y8G("ngIf",n.userActions.updateAction),t.R7$(1),t.Y8G("ngIf",n.userActions.deleteAction)}}function U(o,l){1&o&&t.nrm(0,"tr",31)}function H(o,l){if(1&o){const e=t.RV6();t.j41(0,"tr",32),t.bIt("click",function(){const m=t.eBV(e).$implicit,R=t.XpG();return t.Njj(R.updateRol(m))}),t.k0s()}}const O=function(){return["Roles"]},J=function(){return[]},w=[{path:"",component:(()=>{class o{constructor(e,n){this.apiClient=e,this.dialog=n,this.dataSource=new a.I6([]),this.columns=[{name:"ID",property:"id",visible:!0,isModelProperty:!0},{name:"Nombre",property:"name",visible:!0,isModelProperty:!0},{name:"Description",property:"description",visible:!0,isModelProperty:!0},{name:"es Base?",property:"baseRole",visible:!0,isModelProperty:!0},{name:"Estado",property:"roleStatus",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10,this.userActions={},this.successActionList=r=>{this.userActions=r}}ngOnInit(){this.getRoles(),this.apiClient.getRequest("/api/v1/resource/actions-by-user?frontendCode=PAGE_ROL").subscribe({next:this.successActionList})}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}getRoles(){this.apiClient.getRequest("/api/role").subscribe({next:e=>{this.dataSource.data=e,console.log(e)},error:e=>{console.error(e)}})}onFilterChange(e){console.info(event),this.dataSource&&(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}createRol(){console.info("Abre dialogo"),this.dialog.open(v,{width:"400px"}).afterClosed().subscribe(e=>{e?(console.info("Al cerrar",e),this.apiClient.postRequest("/api/role",e).subscribe({next:n=>{console.info("OK",n),this.getRoles()},error:n=>{console.error("error",n)}}),console.info("Fin api call")):console.info("Cancelado")}),console.info("Fin Metodo")}deleteRol(e){this.apiClient.deleteRequest(e.id,"/api/role").subscribe({next:n=>{this.getRoles()},error:n=>{}})}updateRol(e){console.info(e),this.dialog.open(v,{data:e,width:"400px"}).afterClosed().subscribe(n=>{n?this.apiClient.putRequest(`/api/role/${n.id}`,n.id,n).subscribe({next:r=>{this.getRoles()},error:r=>{console.error(r)}}):console.info("Cancelado")})}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(G.f),t.rXU(c.bZ))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["fury-rol"]],decls:17,vars:10,consts:[["mode","card"],["current","Rol",3,"crumbs"],["name","Rol",3,"columns","filterChange"],["class","actions",4,"ngIf"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(n,r){1&n&&(t.j41(0,"fury-page-layout",0)(1,"fury-page-layout-header"),t.nrm(2,"fury-breadcrumbs",1),t.k0s(),t.j41(3,"fury-page-layout-content")(4,"fury-list",2),t.bIt("filterChange",function(R){return r.onFilterChange(R)}),t.DNE(5,M,4,0,"div",3),t.j41(6,"table",4),t.qex(7,5),t.DNE(8,N,2,0,"th",6),t.DNE(9,S,2,0,"td",7),t.bVm(),t.DNE(10,X,2,1,"ng-container",8),t.qex(11,9),t.DNE(12,z,1,0,"th",10),t.DNE(13,L,8,3,"td",7),t.bVm(),t.DNE(14,U,1,0,"tr",11),t.DNE(15,H,1,0,"tr",12),t.k0s(),t.nrm(16,"mat-paginator",13),t.k0s()()()),2&n&&(t.R7$(2),t.Y8G("crumbs",t.lJ4(8,O)),t.R7$(2),t.Y8G("columns",t.lJ4(9,J)),t.R7$(1),t.Y8G("ngIf",r.userActions.createAction),t.R7$(1),t.Y8G("dataSource",r.dataSource),t.R7$(4),t.Y8G("ngForOf",r.columns),t.R7$(4),t.Y8G("matHeaderRowDef",r.visibleColumns),t.R7$(1),t.Y8G("matRowDefColumns",r.visibleColumns),t.R7$(1),t.Y8G("pageSize",r.pageSize))},dependencies:[u.Sq,u.bT,$.m,I.s,p.iY,p.$0,_.So,x.An,d.kk,d.fb,d.Cp,D.iy,C.B4,C.aE,a.Zl,a.tL,a.ji,a.cC,a.YV,a.iL,a.KS,a.$R,a.YZ,a.NB,T.T,E.M,k.M]})}}return o})()}];let Z=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[g.iI.forChild(w),g.iI]})}}return o})();var K=i(3632),Q=i(91398),W=i(49320),q=i(86600),tt=i(82798);let et=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[u.MD,f.w2,s.YN,p.Hl,c.hM,h.RG,y.fS,s.X1,q.Sy,tt.Ve]})}}return o})(),ot=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[u.MD,Z,K.V,Q.H,p.Hl,_.g7,x.m_,d.Cn,D.Ou,C.NQ,a.tP,W.S,et]})}}return o})()}}]);